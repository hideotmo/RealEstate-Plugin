(function(b){function a(g,j,d){var i,e,f,h,c;return function(){f=this;e=arguments;h=new Date();var l=function(){var m=(new Date())-h;if(m<j){i=setTimeout(l,j-m)}else{i=null;if(!d){c=g.apply(f,e)}}};var k=d&&!i;if(!i){i=setTimeout(l,j)}if(k){c=g.apply(f,e)}return c}}b.fn.scrollsnap=function(e){var g=b.extend({direction:"y",snaps:"*",proximity:12,offset:0,duration:200,latency:250,easing:"swing",onSnapEvent:"scrollsnap",onSnap:function(i,h){},onSnapWait:50},e);var c=g.direction==="x"?"Left":"Top",f="offset"+c,d="scroll"+c;return this.each(function(){var l=this,h=b(this);if(l.nodeType==1){h.css("position","relative");var j=null;var i=function(r){var q=null,m=g.proximity+1;h.find(g.snaps).each(function(){var t=this,s=Math.abs(t[f]+g.offset-l[d]);if(s<m){q=t;m=s}});if(q){var n=q[f]+g.offset,p={},o=b(q);p[d]=n;if(Math.abs(h[d]()-n)>2){h.animate(p,g.duration,g.easing,a(function(){if(g.onSnap){g.onSnap(o)}o.trigger(g.onSnapEvent)},g.onSnapWait))}else{if(n!==j){if(g.onSnap){g.onSnap(o,true)}}}j=n}};h.bind("scrollstop",{latency:g.latency},i)}else{if(l.nodeType==9){var k=(l.defaultView||l.parentWindow);var j=null;var i=function(r){var q=null,m=g.proximity+1;b(l).find(g.snaps).each(function(){var t=(typeof k.scrollX!="undefined")?"scroll"+g.direction.toUpperCase():"page"+g.direction.toUpperCase()+"Offset";var u=this,s=Math.abs((b(u).offset()[c.toLowerCase()]+g.offset)-k[t]);if(s<m){q=u;m=s}});if(q){var p=b(q),n=p.offset()[c.toLowerCase()]+g.offset,o={};o[d]=n;if(Math.abs(h[d]()-n)>2){b("html, body").animate(o,g.duration,g.easing,a(function(){if(g.onSnap){g.onSnap(p)}p.trigger(g.onSnapEvent)},g.onSnapWait))}else{if(n!==j){if(g.onSnap){g.onSnap(p,true)}}}j=n}};h.bind("scrollstop",{latency:g.latency},i);b(k).bind("resize",i)}}})}})(jQuery);